<% provide(:title, @comic.title) %>

<!--*********************************************************************** -->
<!--1-1 COMIC TITLE ******************************************************* -->
<!--*********************************************************************** -->

<h2 class="title"><%= @comic.title %></h2>





<!--*********************************************************************** -->
<!--1-2 THE COMIC ********************************************************* -->
<!--*********************************************************************** -->

<figure class="comic">
	<div id="swipey"></div>
	<% if @comic.number == 1 %>
	<%= link_to image_tag(@comic.image_url), '#' %> 
	<% else %>
	<%= link_to image_tag(@comic.image_url), page_url(@comic.number-1), title: @comic.title %> 
	<% end %>
</figure><!-- figure.comic -->





<!--*********************************************************************** -->
<!--1-3 COMIC NAVIGATION - DESKTOP **************************************** -->
<!--*********************************************************************** -->

<% icon_size = "40" %>
<% icon_color = "black" %>
<% next_comic = @comic.number+1 %>
<% previous_comic = @comic.number-1 %>

<div class="comicnav">
	<% if @comic == Comic.first %>
		<%= link_to '', page_url(random),
				class:  'livicon hidden',
				data:   { name: "shuffle", size: "#{icon_size}", color: icon_color} %>
		<%= link_to '', page_url(random),
				class:  'livicon hidden',
				data:   { name: "shuffle", size: "#{icon_size}", color: icon_color} %>
	<% else %>
		<%= link_to '', page_url(Comic.first.number),
				class:  'livicon shadowed',
				data:   { name: "angle-double-left", animate: "true", eventtype: 'hover', size: "#{icon_size}", color: icon_color, shadow: "true" },
				title:  "Go to first",
				method: 'get' %>
		<div class="previous-preview">
			<%= @previous_comic.title %>
		</div>
		<%= link_to '', page_url(@previous_comic),
		 		class:  'livicon shadowed',
		 		data:   { name: "angle-left", animate: "true", eventtype: 'hover', size: "#{icon_size}", color: icon_color },
		 		title:  "Previous comic",
		 		method: 'get' %>
	<% end %>

		<%= link_to '', page_url(random),
				class:  'livicon shadowed',
				data:   { name: "shuffle", animate: "true", eventtype: "hover", size: "#{icon_size}", color: icon_color },
				title:  "Random comic",
				method: 'get' %>

	<% if @comic == Comic.last %>
		<%= link_to '', page_url(random),
				class:  'livicon hidden',
				data:   { name: "shuffle", size: "#{icon_size}", color: icon_color} %>
		<%= link_to '', page_url(random),
				class:  'livicon hidden',
				data:   { name: "shuffle", size: "#{icon_size}", color: icon_color} %>
	<% else %>
		<%= link_to '', page_url(@next_comic),
		 	  class:  'livicon shadowed',
		 	  data:   { name: "angle-right", animate: "true", eventtype: 'hover', size: "#{icon_size}", color: icon_color },
		 	  title:  "Next comic",
		 	  method: 'get' %>
		<div class="next-preview">
			<%= @next_comic.title %>
		</div>
		<%= link_to '', page_url(Comic.last.number),
			  class:  'livicon shadowed',
			  data:   { name: "angle-double-right", animate: "true", eventtype: 'hover', size: "#{icon_size}", color: icon_color },
			  title:  "Go to last",
			  method: 'get' %>
	<% end %> 
</div><!-- .comicnav -->





<!--*********************************************************************** -->
<!--1-4 COMIC NAVIGATION - MOBILE  **************************************** -->
<!--*********************************************************************** -->

<% mobile_icon_size = "52" %>

<div class="mobile-comicnav">

	<div class="top-row">
		<% if @comic == Comic.first %>
			<%= link_to '', page_url(random), 						
					class:  'livicon hidden', 
					data:   { name: "shuffle", 		 size: "#{mobile_icon_size}" } %>
		<% else %>
			<%= link_to '', page_url(@previous_comic),
			 		class:  'livicon shadowed',        
					data:   { name: "angle-left",  size: "#{mobile_icon_size}", animate: "true", eventtype: 'click' },
					title:  "Previous comic",
					method: 'get' %>
		<% end %>

		<% if @comic == Comic.last %>
			<%= link_to '', page_url(random),
					class:  'livicon hidden',
			  	data:   { name: "shuffle", 		 size: "#{mobile_icon_size}" } %>
		<% else %>	
			<%= link_to '', page_url(@next_comic),
			 	  class:  'livicon shadowed',
			  	data:   { name: "angle-right", size: "#{mobile_icon_size}", animate: "true", eventtype: 'click' },
		  		title:  "Next comic",
		  		method: 'get' %>
		<% end %>
	</div><!-- .top-row -->

	<div class="middle-row">
		<% if @comic == Comic.first %>
			<%= link_to '', page_url(random),
					class:  'livicon hidden',
				  data:   { name: "shuffle", 		 			  size: "#{mobile_icon_size}" }%>
		<% else %>
			<%= link_to '', page_url(Comic.first.number),
					class:  'livicon shadowed',        
					data:   { name: "angle-double-left",  size: "#{mobile_icon_size}", animate: "true", eventtype: 'click' },
					title:  "Go to first",
					method: 'get' %>
		<% end %>
			<%= link_to '', page_url(random),
					class:  'livicon shadowed',
		  		data:   { name: "shuffle", 					  size: "#{mobile_icon_size}", animate: "true", eventtype: 'click' },
				  title:  "Random comic",
				  method: 'get' %>
		<% if @comic == Comic.last %>
			<%= link_to '', page_url(random), 
					class:  'livicon hidden',
					data:   { name: "shuffle", 					  size: "#{mobile_icon_size}" } %>
		<% else %>
			<%= link_to '', page_url(Comic.last.number), 
					class:  'livicon shadowed',
					data:   { name: "angle-double-right", size: "#{mobile_icon_size}", animate: "true", eventtype: 'click' },
					title:  "Go to last",
					method: 'get' %>		
		<% end %>
	</div><!-- .middle-row -->


	<div class="social-icons-row">
			<%= link_to '',
				  "http://www.facebook.com/sharer.php?u=http://marchofthemeanies.com/#{@comic.number}&p[summary]=My new favorite web comic.",
					class: "icon-facebook-circled shadowed",
					target: "_blank",
					title: "Share this comic on Facebook"				%>
			<%= link_to '',
				  "http://twitter.com/share?text=My%20new%20favorite%20web%20comic:&url=http://marchofthemeanies.com/#{@comic.number}" ,
					class: "icon-twitter-circled shadowed",
					target: "_blank",
					title: "Share this comic on Twitter"				%>
			<%= link_to '',
				  "https://plus.google.com/share?url=http://marchofthemeanies.com/#{@comic.number}",
					class: "icon-gplus-circled shadowed",
					target: "_blank",
					title: "Share this comic on Google Plus"				%>
			<%= link_to '',
					"mailto:email@echoecho.com?subject=My%20new%20favorite%20web%20comic.&body=Check it out!    http://marchofthemeanies.com/#{@comic.number}",
					class: "icon-mail shadowed",
					title: "Email this comic to a friend"
					 %>
	 		<%= link_to '',
	 				feed_path,
	 				class: 'icon-rss shadowed',
	 				title: "Subscribe!" %>
	</div><!-- .social-icons-row -->
</div><!-- .mobile-comicnav -->




<!-- Mobile swipe navigation script                   -->
<!--**************************************************-->


<script>
	$("#swipey").on('swiperight', function() {
		if (<%= @comic.number %> != <%= Comic.first.number %>) {
			location.href = 'http://marchofthemeanies.com/'+ <%= @comic.number-1 %>;
		}
	});

	$("#swipey").on('swipeleft', function() {
		if (<%= @comic.number %> != <%= Comic.last.number %>) {
			location.href = 'http://marchofthemeanies.com/'+ <%= @comic.number+1 %>;
		}
	});
</script>






